#include "test.h"
#include "terminal_module/terminal.h"
#include "card_module/card.h"
#include "server_module/server.h"
ST_cardData_t g_cardData;
ST_terminalData_t g_termData;
ST_transaction g_transData;
void testCardModule(ST_cardData_t *cardData){
	setvbuf(stdout, NULL, _IONBF, 0);
	setvbuf(stderr, NULL, _IONBF, 0);
	while(getCardPAN(cardData)!=CARD_OK)
		printf("wrong PAN\n");
	printf("Done\n");
	while(getCardHolderName(cardData)!=CARD_OK)
		printf("wrong entry\n");
	printf("Done\n");
	while(getCardExpiryDate(cardData)!=CARD_OK)
		printf("wrong expiry Date\n");
	printf("Done\n");
	g_cardData=*cardData;
}
void testTerminalModule(ST_terminalData_t *termData){
	float max;
	while(getTransactionDate(termData)!=TERMINAL_OK)
		printf("invalid input \n");
	while(setMaxAmount(termData , max)!=TERMINAL_OK)
		{
		printf("Enter maximum amount transaction \n");
		scanf("%f",&max);
		printf("invalid amount \n");
		}
	if(isCardExpired(&g_cardData, termData)!=TERMINAL_OK)
	{
		printf("the card is Expired \n");
	}
	while(getTransactionAmount(termData)!=TERMINAL_OK)
		printf("invalid amount \n");
	if(isBelowMaxAmount(termData)!=TERMINAL_OK){
		printf("Exceeded the allowed limit \n");
		g_termData=*termData;
		return;
	}
	g_termData=*termData;
}

void testServerModule(){
	g_transData.cardHolderData=g_cardData;
	g_transData.terminalData=g_termData;


}
